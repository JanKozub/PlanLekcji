<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>vaadin-cookie-consent accessility test</title>
    <meta content="width=device-width, initial-scale=1" name="viewport">

    <script src="../../../wct-browser-legacy/browser.js"></script>
    <script src="../../../@webcomponents/webcomponentsjs/webcomponents-bundle.js"></script>
    <script src="../../../@polymer/test-fixture/test-fixture.js" type="module"></script>
    <!-- Import the element to test -->
    <script src="../vaadin-cookie-consent.js" type="module"></script>
</head>
<body>
<test-fixture id="default">
    <template>
        <vaadin-cookie-consent></vaadin-cookie-consent>
    </template>
</test-fixture>

<script type="module">
      import 'axe-core/axe.min.js';
      import {axeReport} from 'pwa-helpers/axe-report.js';

      let resolveWebComponentsReady;
      const webComponentsReady = new Promise(resolve => {
        resolveWebComponentsReady = resolve;
      });

      if (window.WebComponents && window.WebComponents.ready) {
        setTimeout(resolveWebComponentsReady, 0);
      } else {
        window.addEventListener('WebComponentsReady', resolveWebComponentsReady);
      }

      describe('accessibility', function() {
        it('should pass the aXe accessibility audit for WCAG 2.0 Level A / AA, and Section 508', async function() {
          await webComponentsReady;
          const el = fixture('default');
          el._show();
          await new Promise(resolve => {
            // Give time for the element to render and animations to finish.
            // Otherwise the tests fail in IE11 and Edge
            setTimeout(resolve, 1000);
          });
          await axeReport(el._getPopup());
        });
      });



</script>
</body>
</html>
